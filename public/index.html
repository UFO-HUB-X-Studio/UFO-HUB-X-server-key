<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UFO HUB X ‚Äî Get Key</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f13;
      --card:#10161d;
      --soft:#0f141a;
      --text:#e7f4ee;
      --muted:#9cc6b5;
      --accent:#00ff8c;
      --accent-weak:#00d77a;
      --danger:#ff4d4d;
      --shadow: 0 10px 30px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{
      font-family: 'Outfit',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text); background: radial-gradient(1200px 600px at 70% 0%, #132029, #0b0f13);
      background-attachment: fixed;
    }
    .nav{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(6px);
      background:rgba(11,15,19,.35);
      border-bottom:1px solid rgba(255,255,255,.05);
    }
    .container{max-width:1000px;margin:0 auto;padding:18px}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800;letter-spacing:.5px}
    .brand img{width:28px;height:28px;border-radius:8px;box-shadow:0 0 0 2px rgba(0,255,140,.25)}
    .brand .green{color:var(--accent)}
    .grid{display:grid;gap:16px;margin:18px auto}
    @media(min-width:880px){.grid{grid-template-columns:1fr 1fr}}
    .card{
      background:linear-gradient(180deg, #121a22, #0e151c);
      border:1px solid rgba(0,255,140,.18);
      border-radius:16px; box-shadow:var(--shadow);
    }
    .card-hd{padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;justify-content:space-between;align-items:center}
    .badge{display:inline-flex;align-items:center;gap:8px;background:#0c1611;border:1px solid rgba(0,255,140,.3);color:var(--accent);
      padding:8px 12px;border-radius:999px;font-weight:600}
    .ghost{background:#111a14;color:var(--muted);border-color:rgba(0,255,140,.12)}
    .card-bd{padding:18px}
    .row{display:flex;justify-content:space-between;align-items:center;gap:14px;flex-wrap:wrap}
    .progress{
      height:10px;border-radius:999px;background:#0e1216;border:1px solid rgba(255,255,255,.06);position:relative;overflow:hidden
    }
    .progress>.bar{
      position:absolute;inset:0; width:0%; background:linear-gradient(90deg,var(--accent),#a6ffc7); border-radius:999px;
      box-shadow:0 0 16px rgba(0,255,140,.35) inset;
      transition:width .25s ease;
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px; padding:12px 18px; border:1px solid rgba(0,255,140,.28);
      border-radius:12px; font-weight:700; color:#08120e; background:var(--accent); cursor:pointer; transition:.15s;
      user-select:none
    }
    .btn:hover{filter:brightness(1.06)}
    .btn:active{transform:translateY(1px)}
    .btn.ghost{
      background:#0f151a; color:var(--text); border-color:rgba(0,255,140,.25)
    }
    .btn.warn{background:var(--danger); border-color:rgba(255,77,77,.3); color:white}
    .btn.small{padding:8px 12px; border-radius:10px; font-weight:600}
    table{width:100%;border-collapse:separate;border-spacing:0 10px}
    th,td{padding:12px 14px;text-align:left}
    th{color:var(--muted);font-weight:600;font-size:14px}
    tr{background:#0f151b;border:1px solid rgba(255,255,255,.06)}
    tr td:first-child,tr th:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}
    tr td:last-child,tr th:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px}
    .pill.active{background:#0e1a14;color:var(--accent);border:1px solid rgba(0,255,140,.35)}
    .muted{color:var(--muted)}
    .center{display:flex;justify-content:center}
    .dim{opacity:.7}
    .footer{margin:28px auto 8px; text-align:center; color:var(--muted); font-size:13px}
  </style>
</head>
<body>
  <!-- NAV -->
  <div class="nav">
    <div class="container row">
      <div class="brand">
        <!-- ‡∏ß‡∏≤‡∏á‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Ç‡∏≠‡∏á‡∏ô‡∏≤‡∏¢‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        <img src="https://raw.githubusercontent.com/edent/SuperTinyIcons/master/images/svg/ufo.svg" alt="UFO">
        <div><span class="green">UFO</span> HUB X</div>
      </div>
      <div class="dim">Luar-style Key Portal (custom)</div>
    </div>
  </div>

  <div class="container">
    <div class="grid">
      <!-- LEFT: Campaign / Progress -->
      <div class="card">
        <div class="card-hd">
          <div class="badge"><span>üõ∞Ô∏è</span> UFO Campaign</div>
          <button id="startBtn" class="btn small"><span>üü¢</span> START</button>
        </div>
        <div class="card-bd">
          <div class="row" style="margin-bottom:10px">
            <div class="muted">Progress: <b id="progText">0/2</b></div>
            <div class="muted" id="timer"> </div>
          </div>
          <div class="progress"><div class="bar" id="bar"></div></div>

          <div style="margin-top:18px">
            <div class="muted" style="margin-bottom:8px">Complete 2 small steps:</div>
            <div class="row">
              <button class="btn ghost small" id="task1"><span>üîó</span> Visit Partner #1</button>
              <button class="btn ghost small" id="task2"><span>üîó</span> Visit Partner #2</button>
            </div>
            <div class="muted" style="margin-top:10px;font-size:13px">Tip: each step will unlock after you view the page for a moment.</div>
          </div>
        </div>
      </div>

      <!-- RIGHT: Keys table -->
      <div class="card">
        <div class="card-hd">
          <div class="badge ghost">üîë Your Keys</div>
          <button id="newKey" class="btn small"><span>‚ûï</span> GET A NEW KEY</button>
        </div>
        <div class="card-bd">
          <table>
            <thead>
              <tr>
                <th>KEY</th>
                <th>TIME LEFT</th>
                <th>STATUS</th>
                <th class="center">ACTIONS</th>
              </tr>
            </thead>
            <tbody id="keyRows">
              <!-- filled by JS -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="footer">¬© UFO HUB X Key Service ‚Äî your key resets everyday. </div>
  </div>

  <script>
    // ================== UTIL & STATE ==================
    const $ = s => document.querySelector(s);
    const state = {
      tasks: { t1:false, t2:false },
      started: false,
      countdown: 60, // ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
      keys: loadKeys()
    };

    function loadKeys(){
      try{ return JSON.parse(localStorage.getItem('ufo_keys')||'[]'); }catch{ return []; }
    }
    function saveKeys(){ localStorage.setItem('ufo_keys', JSON.stringify(state.keys)); }

    function fmtLeft(ms){
      if(ms<=0) return "00:00:00";
      const s = Math.floor(ms/1000);
      const h = String(Math.floor(s/3600)).padStart(2,'0');
      const m = String(Math.floor((s%3600)/60)).padStart(2,'0');
      const ss= String(s%60).padStart(2,'0');
      return `${h}:${m}:${ss}`;
    }

    function randKey(){
      const abc="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
      let a="UFO-HUB-X-";
      for(let i=0;i<8;i++) a+=abc[Math.floor(Math.random()*abc.length)];
      return a;
    }

    // ================== UI UPDATE ==================
    function progressCount(){ return (state.tasks.t1?1:0) + (state.tasks.t2?1:0); }
    function paintProgress(){
      const done = progressCount();
      $('#progText').textContent = `${done}/2`;
      $('#bar').style.width = (done/2*100) + '%';
    }

    function paintKeys(){
      const tbody = $('#keyRows');
      tbody.innerHTML = '';
      const now = Date.now();
      if(state.keys.length===0){
        const tr = document.createElement('tr');
        tr.innerHTML = `<td colspan="4" class="muted" style="text-align:center;padding:26px">No keys yet ‚Äî click ‚ÄúGET A NEW KEY‚Äù.</td>`;
        tbody.appendChild(tr);
        return;
      }
      state.keys.forEach((k, idx)=>{
        const left = k.expires - now;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td style="font-weight:700">${k.value}</td>
          <td class="muted">${fmtLeft(Math.max(0,left))}</td>
          <td><span class="pill ${left>0?'active':''}">${left>0?'ACTIVE':'EXPIRED'}</span></td>
          <td class="center">
            <div class="row">
              <button class="btn small ghost" data-copy="${idx}">üìã Copy</button>
              <button class="btn small" data-plus="${idx}">‚è© +24H</button>
            </div>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    // ================== TASKS / TIMER ==================
    let tickTimer = null;
    function start(){
      if(state.started) return;
      state.started = true;
      const btn = $('#startBtn');
      btn.classList.add('warn');
      btn.innerHTML = '<span>‚è≥</span> RUNNING';

      let left = state.countdown;
      $('#timer').textContent = `00:${String(left).padStart(2,'0')}`;
      tickTimer = setInterval(()=>{
        left--;
        if(left<=0){
          clearInterval(tickTimer);
          $('#timer').textContent = '‚úî Ready';
          btn.classList.remove('warn');
          btn.innerHTML = '<span>‚úÖ</span> DONE';
        }else{
          $('#timer').textContent = `00:${String(left).padStart(2,'0')}`;
        }
      },1000);
    }

    function completeTask(id){
      // ‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏õ‡∏•‡∏≠‡∏° (‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏î‡∏π 3 ‡∏ß‡∏¥) ‡πÅ‡∏•‡πâ‡∏ß‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
      const win = window.open('https://example.com', '_blank');
      setTimeout(()=>{ try{ win.close(); }catch{} }, 3000);

      // ‡∏´‡∏ô‡πà‡∏ß‡∏á 3 ‡∏ß‡∏¥‡∏Ñ‡πà‡∏≠‡∏¢‡∏ï‡∏¥‡πä‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
      setTimeout(()=>{
        state.tasks[id] = true;
        paintProgress();
      }, 3200);
    }

    // ================== NEW KEY ==================
    function canClaim(){
      return progressCount()>=2 && $('#timer').textContent.includes('Ready');
    }
    function newKey(){
      if(!canClaim()){
        alert('Please complete 2 steps and wait for the timer to finish.');
        return;
      }
      const v = randKey();
      const expires = Date.now() + 24*60*60*1000; // 24h
      state.keys.unshift({ value:v, expires });
      saveKeys();
      paintKeys();
      // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ
      state.tasks = {t1:false, t2:false}; paintProgress();
      $('#startBtn').innerHTML = '<span>üü¢</span> START';
      $('#timer').textContent = '';
      state.started=false;
    }

    function copyKey(i){
      const v = state.keys[i]?.value; if(!v) return;
      navigator.clipboard.writeText(v).then(()=>{
        alert('Copied: '+v);
      });
    }
    function plus24h(i){
      const k = state.keys[i]; if(!k) return;
      k.expires += 24*60*60*1000;
      saveKeys(); paintKeys();
    }

    // ================== EVENTS ==================
    $('#startBtn').addEventListener('click', start);
    $('#task1').addEventListener('click', ()=>completeTask('t1'));
    $('#task2').addEventListener('click', ()=>completeTask('t2'));
    $('#newKey').addEventListener('click', newKey);
    $('#keyRows').addEventListener('click', (e)=>{
      const c = e.target.closest('[data-copy]'); if(c){ copyKey(+c.dataset.copy); return; }
      const p = e.target.closest('[data-plus]'); if(p){ plus24h(+p.dataset.plus); return; }
    });

    // ================== INIT ==================
    paintProgress();
    paintKeys();
    // ‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ Time Left UI ‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    setInterval(paintKeys, 1000);
  </script>
</body>
</html>
