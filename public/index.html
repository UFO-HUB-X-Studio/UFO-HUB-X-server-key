<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>UFO HUB X ‚Äî Key Portal</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#050806; --panel:#0b1210; --panel2:#0a1612; --line:#103424;
    --text:#eafff4; --muted:#9ad7be; --neon:#00ff8c; --neon2:#06d47a;
    --glow0:0 0 24px rgba(0,255,140,.35), 0 0 60px rgba(0,255,140,.18);
    --shadow:0 18px 60px rgba(0,0,0,.55);
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:'Orbitron',system-ui,Segoe UI,Roboto,Arial}
  .bg1{position:fixed;inset:0;z-index:-3;background:
    radial-gradient(1200px 600px at 80% -10%, rgba(0,255,140,.12), transparent 60%),
    radial-gradient(900px 520px  at 10% 110%, rgba(0,255,140,.10), transparent 60%),
    var(--bg);}
  .bg2{position:fixed;inset:0;z-index:-2;background:url("/img/bg") center/cover no-repeat;opacity:.26;filter:saturate(1.05) brightness(.9)}
  .wrap{max-width:960px;margin:26px auto;padding:0 18px}
  .hero{display:grid;grid-template-columns:120px 1fr;gap:18px;align-items:center;
        background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.18));
        border:1px solid var(--line);border-radius:22px;padding:18px;box-shadow:var(--shadow);backdrop-filter:blur(6px);position:relative;overflow:hidden}
  .hero::after{content:"";position:absolute;inset:-2px;border-radius:22px;pointer-events:none;box-shadow:inset 0 0 0 1px rgba(0,255,140,.08), inset var(--glow0)}
  .logo{width:120px;height:120px;border-radius:18px;border:1px solid var(--line);overflow:hidden;background:#0d1a14;box-shadow:var(--glow0)}
  .logo img{width:100%;height:100%;object-fit:cover;display:block}
  .title h1{margin:0 0 6px;font-size:34px;line-height:1.05;letter-spacing:.5px}
  .title small{color:var(--muted)}
  .bar{height:12px;border-radius:12px;overflow:hidden;border:1px solid var(--line);background:#07140e;margin-top:10px}
  .bar i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--neon),#67ffb8);box-shadow:var(--glow0);transition:width .35s ease}
  .start{margin-top:10px;display:flex;gap:12px;align-items:center}
  .btn{appearance:none;border:none;border-radius:14px;padding:12px 18px;font-weight:800;cursor:pointer}
  .btnPrimary{background:var(--neon);color:#022014;box-shadow:var(--glow0)}
  .btnPrimary:hover{filter:brightness(.95)}
  .card{margin-top:18px;background:linear-gradient(180deg, rgba(0,0,0,.26), rgba(0,0,0,.18));border:1px solid var(--line);
        border-radius:22px;box-shadow:var(--shadow);overflow:hidden}
  .cardHead{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid var(--line);background:rgba(0,0,0,.08)}
  .cardHead h2{margin:0;font-size:18px;color:var(--neon)}
  .pill{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:999px;background:#07150f;border:1px solid var(--line);font-weight:800}
  .list{padding:10px}
  .row{display:grid;grid-template-columns:1.6fr 1fr .8fr .9fr;gap:12px;align-items:center;padding:12px;border-bottom:1px dashed var(--line)}
  .row:last-child{border-bottom:none}
  .copy{width:44px;height:44px;border-radius:12px;background:var(--panel2);border:1px solid var(--line);display:grid;place-items:center;cursor:pointer}
  .badge{display:inline-flex;align-items:center;padding:6px 12px;border-radius:999px;font-weight:900;font-size:12px}
  .ok{background:rgba(0,255,140,.12);color:var(--neon);border:1px solid rgba(0,255,140,.4)}
  .muted{color:var(--muted)}
  .foot{display:flex;gap:12px;flex-wrap:wrap;align-items:center;padding:14px;border-top:1px solid var(--line);background:rgba(0,0,0,.06)}
  input.inp{background:#08140f;border:1px solid var(--line);color:var(--text);padding:12px;border-radius:12px;min-width:220px;flex:1}
  @media (max-width:720px){.hero{grid-template-columns:1fr}.logo{margin:auto}.title{text-align:center}}
</style>
</head>
<body>
<div class="bg1"></div>
<div class="bg2"></div>

<div class="wrap">
  <!-- HERO -->
  <section class="hero">
    <div class="logo">
      <img src="/img/profile" alt="profile"
           onerror="this.onerror=null;this.src='';this.style.background='radial-gradient(80px 80px at 50% 50%, rgba(0,255,140,.35), transparent 60%)'">
    </div>
    <div class="title">
      <h1>UFO HUB X</h1>
      <small>Progress: <span id="ptext">0/1</span></small>
      <div class="bar"><i id="pfill"></i></div>
      <div class="start">
        <button id="btnStart" class="btn btnPrimary">START</button>
      </div>
    </div>
  </section>

  <!-- KEY PANEL -->
  <section class="card">
    <div class="cardHead">
      <h2>üîë Your Key</h2>
      <button id="btnGet" class="btn btnPrimary">Ôºã GET A NEW KEY</button>
    </div>

    <div class="list" id="list">
      <!-- rows will be injected here -->
    </div>

    <div class="foot">
      <input id="uid" class="inp" placeholder="UID (e.g. 123)">
      <input id="place" class="inp" placeholder="Place (e.g. 999)">
      <small class="muted">‡∏Å‡∏£‡∏≠‡∏Å UID/Place ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚ÄúGET A NEW KEY‚Äù</small>
    </div>
  </section>
</div>

<script>
  const $ = s => document.querySelector(s);
  const API = ""; // ‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

  let progress = 0;
  function setProgress(v){
    progress = Math.max(0, Math.min(1, v));
    $("#ptext").textContent = `${progress}/1`;
    $("#pfill").style.width  = (progress*100) + "%";
    $("#btnStart").textContent = progress >= 1 ? "DONE" : "START";
  }
  $("#btnStart").onclick = () => setProgress(progress+1);

  function fmtLeft(sec){
    if (sec<=0) return "00:00:00";
    const h=String(Math.floor(sec/3600)).padStart(2,"0");
    const m=String(Math.floor((sec%3600)/60)).padStart(2,"0");
    const s=String(sec%60).padStart(2,"0");
    return `${h}:${m}:${s}`;
  }

  let rows = [];
  function render(){
    const root = $("#list"); root.innerHTML = "";
    rows.forEach((r,idx)=>{
      const left = Math.max(0, Math.floor(r.expires_at - Date.now()/1000));
      const div = document.createElement("div"); div.className="row";
      div.innerHTML = `
        <div class="pill">üîë ${r.key}</div>
        <div class="muted" id="left-${idx}">${fmtLeft(left)}</div>
        <div><span class="badge ok">${left>0?"ACTIVE":"EXPIRED"}</span></div>
        <div style="display:flex;gap:8px">
          <button class="copy" title="Copy">üìã</button>
          <button class="btn btnPrimary" style="padding:10px 12px" disabled>Ôºã5H ‚è©</button>
        </div>`;
      div.querySelector(".copy").onclick = () => navigator.clipboard.writeText(r.key);
      root.appendChild(div);
    });
  }

  setInterval(()=> {
    rows.forEach((r,i)=>{
      const el = document.getElementById(`left-${i}`);
      if (el) el.textContent = fmtLeft(Math.max(0, Math.floor(r.expires_at - Date.now()/1000)));
    });
  }, 1000);

  async function requestKey(){
    const uid   = $("#uid").value.trim();
    const place = $("#place").value.trim();
    if(!uid || !place){ alert("‡∏Å‡∏£‡∏≠‡∏Å UID ‡πÅ‡∏•‡∏∞ Place ‡∏Å‡πà‡∏≠‡∏ô"); return; }
    try{
      const res = await fetch(`${API}/getkey?uid=${encodeURIComponent(uid)}&place=${encodeURIComponent(place)}`);
      const data = await res.json();
      if(!data || !data.ok){ alert("getkey ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß"); return; }
      const exp = data.expires_at || (Date.now()/1000 + 600);
      rows = [{ key: data.key, expires_at: exp }];
      render(); setProgress(1);
    }catch(e){ console.error(e); alert("‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"); }
  }
  $("#btnGet").onclick = requestKey;

  setProgress(0); render();
</script>
</body>
</html>
