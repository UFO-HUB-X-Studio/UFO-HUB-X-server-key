<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>UFO HUB X ‚Äî Key Center</title>
<style>
  :root{
    --bg:#0b1220; --card:#111a2e; --card2:#0f1729; --text:#e7eefc;
    --muted:#a8b3cf; --accent:#02e3aa; --danger:#ff5a70;
  }
  *{box-sizing:border-box} body{margin:0;background:#000;color:var(--text);font:14px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
  .bg{
    position:fixed; inset:0;
    background:linear-gradient(0deg, rgba(11,18,32,.9), rgba(11,18,32,.7)), url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop');
    background-size:cover; background-position:center;
    filter:saturate(1) contrast(1.05);
  }
  .wrap{position:relative;min-height:100dvh;display:flex;align-items:flex-start;justify-content:center;padding:32px}
  .panel{width:min(880px,100%);background:linear-gradient(180deg,var(--card),var(--card2));border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.35);padding:18px 20px}
  .row{display:flex;gap:18px;align-items:center;justify-content:space-between}
  .brand{font-weight:800;font-size:22px;letter-spacing:.3px}
  .progress{flex:1;height:10px;background:#0b1220;border-radius:999px;position:relative;margin:0 16px}
  .bar{position:absolute;inset:0;height:100%;width:0;background:linear-gradient(90deg,#0cf6a9,#58ffd1);border-radius:999px;transition:width .3s ease}
  .btn{border:0;border-radius:12px;padding:10px 16px;background:#1b2a4a;color:var(--text);cursor:pointer;font-weight:700}
  .btn:hover{filter:brightness(1.05)}
  .btn-acc{background:linear-gradient(90deg,#0cf6a9,#58ffd1);color:#07231a}
  .grid{margin-top:14px;background:#0e1528;border-radius:14px;padding:14px}
  .gridhead{display:grid;grid-template-columns:1fr 160px 120px 150px;gap:12px;padding:10px 12px;color:var(--muted);font-weight:700}
  .item{display:grid;grid-template-columns:1fr 160px 120px 150px;gap:12px;align-items:center;padding:12px;border-radius:12px;background:#0f1a2f}
  .pill{display:inline-flex;align-items:center;gap:6px;border-radius:999px;padding:6px 10px;font-weight:700}
  .pill.active{background:rgba(2,227,170,.12);color:var(--accent)}
  .pill.danger{background:rgba(255,90,112,.12);color:var(--danger)}
  .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
  .muted{color:var(--muted)}
  .small{font-size:13px}
  .footer{display:flex;gap:10px;justify-content:center;color:var(--muted);margin-top:14px}
  .copy{background:#0e1b34}
  .extend{background:#133c2f}
  .newkey{display:flex;justify-content:center;margin-top:14px}
  .newkey .btn{background:#0e1b34}
</style>
</head>
<body>
<div class="bg"></div>
<div class="wrap">
  <div class="panel">
    <div class="row">
      <div>
        <div class="brand">UFO HUB X ‚Äî Key Center</div>
        <div class="small muted" id="progressText">Progress: 0/2</div>
      </div>
      <div class="progress"><div class="bar" id="bar"></div></div>
      <button class="btn btn-acc" id="startBtn">START</button>
    </div>

    <div class="grid">
      <div class="gridhead">
        <div>YOUR KEYS</div><div>TIME LEFT</div><div>STATUS</div><div>ACTIONS</div>
      </div>
      <div class="item" id="row" style="display:none">
        <div>
          <button class="btn copy small" id="copyBtn">üìã Copy</button>
          <span class="mono" id="keyTxt">UFO-xxxxxxxx-48H</span>
        </div>
        <div class="mono" id="left">--:--:--</div>
        <div><span class="pill active" id="status">ACTIVE</span></div>
        <div>
          <button class="btn extend small" id="extBtn">‚è≥ +48H</button>
        </div>
      </div>
      <div class="newkey">
        <button class="btn" id="newBtn">Ôºã GET A NEW KEY</button>
      </div>
    </div>

    <div class="footer small">
      <a class="muted" id="discord" href="#" target="_blank">Join Discord</a>
      <span>¬∑</span>
      <span class="muted">If key expires you can get a new one anytime.</span>
    </div>
  </div>
</div>

<script>
  // ====== CONFIG ======
  const DISCORD_URL = "https://discord.gg/your-server"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ
  document.getElementById("discord").href = DISCORD_URL;

  const uid   = (typeof Roblox !== "undefined" && Roblox?.UserId) || Math.floor(Math.random()*1e9).toString();
  const place = (typeof game !== "undefined" && game?.PlaceId) || "web";

  const row   = document.getElementById("row");
  const keyTxt= document.getElementById("keyTxt");
  const leftEl= document.getElementById("left");
  const bar   = document.getElementById("bar");
  const progressText = document.getElementById("progressText");
  const copyBtn= document.getElementById("copyBtn");
  const extBtn = document.getElementById("extBtn");
  const newBtn = document.getElementById("newBtn");

  let current = null; // {key, expires_at}

  async function api(url){
    const r = await fetch(url);
    if(!r.ok) throw new Error("HTTP "+r.status);
    return await r.json();
  }

  function fmtLeft(sec){
    sec = Math.max(0, sec|0);
    const h = Math.floor(sec/3600), m = Math.floor((sec%3600)/60), s = sec%60;
    return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }
  function setCurrent(obj){
    current = obj;
    row.style.display = "grid";
    keyTxt.textContent = obj.key;
    tick();
  }
  function tick(){
    if(!current) return;
    const now = Math.floor(Date.now()/1000);
    const left = Math.max(0, (current.expires_at|0) - now);
    leftEl.textContent = fmtLeft(left);

    // 48h bar
    const pct = Math.min(100, (left/(48*3600))*100);
    bar.style.width = pct + "%";
    progressText.textContent = `Progress: ${pct.toFixed(0)}/100`;
  }
  setInterval(tick, 1000);

  // actions
  copyBtn.addEventListener("click", ()=>{
    if(!current) return;
    navigator.clipboard?.writeText(current.key);
    copyBtn.textContent = "‚úÖ Copied";
    setTimeout(()=> copyBtn.textContent = "üìã Copy", 1200);
  });

  extBtn.addEventListener("click", async ()=>{
    if(!current) return;
    try{
      const j = await api(`/extend?key=${encodeURIComponent(current.key)}&uid=${encodeURIComponent(uid)}`);
      if(j && j.ok && j.expires_at){ setCurrent({key: current.key, expires_at: j.expires_at}); }
    }catch(e){ console.error(e); alert("Extend failed"); }
  });

  newBtn.addEventListener("click", async ()=>{
    try{
      const j = await api(`/getkey?uid=${encodeURIComponent(uid)}&place=${encodeURIComponent(place)}`);
      if(j && j.ok && j.key){ setCurrent({key: j.key, expires_at: j.expires_at}); }
    }catch(e){ console.error(e); alert("Get key failed"); }
  });

  // auto: ‡∏î‡∏∂‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
  (async ()=>{
    try{
      const j = await api(`/getkey?uid=${encodeURIComponent(uid)}&place=${encodeURIComponent(place)}`);
      if(j && j.ok && j.key){ setCurrent({key: j.key, expires_at: j.expires_at}); }
    }catch(e){ console.error(e); }
  })();
</script>
</body>
</html>
