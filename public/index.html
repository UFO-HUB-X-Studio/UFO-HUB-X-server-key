<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>UFO HUB X — Get Key</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0a1411;color:#d9fff5;margin:0;padding:20px}
  .box{max-width:560px;margin:32px auto;background:#0d1a16;padding:18px 18px 22px;border-radius:16px;box-shadow:0 0 0 1px rgba(34,255,200,.12) inset,0 12px 36px rgba(0,0,0,.45)}
  h1{margin:0 0 10px;font-size:22px;letter-spacing:.4px}
  .ufo{color:#00ff99}
  .row{display:flex;gap:8px;margin-top:10px}
  input,button{border:0;border-radius:12px;padding:10px 12px;font-weight:700}
  input{flex:1;background:#121f1b;color:#eafff7}
  button{background:#00ff99;color:#062015;cursor:pointer}
  .key{margin-top:12px;padding:12px;border-radius:12px;background:#0b1713;border:1px solid rgba(34,255,200,.2);word-break:break-all}
  small{opacity:.8}
</style>
</head>
<body>
<div class="box">
  <h1><span class="ufo">UFO</span> HUB X — Get Key</h1>
  <div class="row">
    <input id="uid"   placeholder="uid"  >
    <input id="place" placeholder="place">
    <button id="btn">GET KEY</button>
  </div>
  <div id="out" class="key" style="display:none"></div>
  <small>แนะนำ: เปิดหน้านี้จากลิงก์ที่คัดลอกในเกม จะกรอก uid/place ให้อัตโนมัติ</small>
</div>
<script>
const $=id=>document.getElementById(id);
const qs=new URLSearchParams(location.search);
$('uid').value   = qs.get('uid')||'';
$('place').value = qs.get('place')||'';
$('btn').onclick=async()=>{
  const uid=$('uid').value.trim(), place=$('place').value.trim();
  if(!uid||!place){ alert('ใส่ uid/place ก่อน'); return; }
  const res = await fetch(`/getkey?uid=${encodeURIComponent(uid)}&place=${encodeURIComponent(place)}`, {cache:'no-store'});
  const j = await res.json().catch(()=>null);
  if(j && j.ok && j.key){
    $('out').style.display='block';
    $('out').textContent = j.key;
    try{ await navigator.clipboard.writeText(j.key); }catch{}
  }else{
    alert('ขอคีย์ไม่สำเร็จ: '+(j&&j.reason||'unknown'));
  }
};
</script>
</body>
</html>
