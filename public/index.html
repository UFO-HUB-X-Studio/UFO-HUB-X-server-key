<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>UFO HUB X</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&display=swap" rel="stylesheet">
<style>
  body {
    margin:0; font-family:'Orbitron',sans-serif; color:#fff;
    background:#050d08 url("/img/bg") no-repeat center/cover fixed;
  }
  .wrap {
    max-width:750px; margin:20px auto; padding:0 10px;
  }
  .card {
    background:rgba(0,0,0,.6); border:1px solid #0f3; border-radius:12px;
    box-shadow:0 0 15px rgba(0,255,100,.4); margin-bottom:18px; overflow:hidden;
  }
  .header {
    text-align:center; padding:20px;
  }
  .header img {
    width:160px; height:160px; object-fit:cover; border-radius:10px;
    box-shadow:0 0 20px rgba(0,255,100,.6);
  }
  .title { font-size:26px; margin-top:12px; color:#0f0; letter-spacing:2px; }
  .strip {
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 20px;
  }
  .pill {
    background:#0b2119; border:1px solid #0f3;
    padding:6px 14px; border-radius:999px; font-size:14px; color:#9fffdc;
  }
  .btn {
    background:#0f3; border:none; color:#000; font-weight:700;
    padding:8px 18px; border-radius:8px; cursor:pointer;
  }
  .prog { padding:0 20px 20px; }
  .bar { height:8px; background:#111; border-radius:6px; overflow:hidden; }
  .fill { height:100%; width:0; background:linear-gradient(90deg,#0f0,#0ff); }
  .prog .label { margin-bottom:6px; font-size:13px; color:#9fffdc; }
  .kHead {
    display:flex; align-items:center; justify-content:space-between;
    padding:10px 16px; background:rgba(0,255,100,.05);
  }
  .kTitle { font-size:15px; color:#0f0; display:flex; align-items:center; gap:6px; }
  .kGet { background:#0f3; border:none; padding:6px 14px; font-weight:700; border-radius:8px; cursor:pointer; }
  .thead, .row {
    display:grid; grid-template-columns:1.5fr 1fr 1fr 1fr;
    gap:8px; align-items:center; padding:10px 16px;
  }
  .thead { font-size:13px; color:#9fffdc; border-bottom:1px solid #093; }
  .tbody { }
  .row { border-bottom:1px solid #063; font-size:14px; }
  .row:last-child { border-bottom:none; }
  .keypill {
    background:#0b2119; border:1px solid #093;
    padding:6px 10px; border-radius:6px; font-size:13px;
  }
  .time { font-size:13px; }
  .badge {
    padding:4px 10px; border-radius:6px; font-size:12px; font-weight:700;
  }
  .ok { background:rgba(0,255,100,.2); color:#0f0; }
  .ex { background:rgba(255,80,80,.2); color:#f66; }
  .act { display:flex; gap:6px; }
  .copy,.tiny {
    background:#0b2119; border:1px solid #093; color:#fff; font-size:12px;
    padding:6px 10px; border-radius:6px; cursor:pointer;
  }
</style>
</head>
<body>
<div class="wrap">

  <!-- Header -->
  <section class="card">
    <div class="header">
      <img src="/img/profile" alt="UFO">
      <div class="title">UFO HUB X</div>
    </div>
    <div class="strip">
      <span class="pill">UFO HUB X</span>
      <button id="btnStart" class="btn">START</button>
    </div>
    <div class="prog">
      <div class="label">Progress: <b id="ptext">0/1</b></div>
      <div class="bar"><div id="pfill" class="fill"></div></div>
    </div>
  </section>

  <!-- Key Panel -->
  <section class="card">
    <div class="kHead">
      <div class="kTitle">ðŸ”‘ Your Key</div>
      <button id="btnGet" class="kGet">+ GET A NEW KEY</button>
    </div>
    <div class="thead">
      <div>KEY</div><div>TIME LEFT</div><div>STATUS</div><div>ACTIONS</div>
    </div>
    <div id="tbody" class="tbody"></div>
  </section>

</div>

<script>
const pText=document.getElementById('ptext');
const pFill=document.getElementById('pfill');
let progress=0;
document.getElementById('btnStart').onclick=()=>{
  progress=Math.min(1,progress+1);
  pText.textContent=`${progress}/1`;
  pFill.style.width=(progress*100)+'%';
};

const tbody=document.getElementById('tbody');
function hhmmss(sec){
  const h=String(Math.floor(sec/3600)).padStart(2,'0');
  const m=String(Math.floor((sec%3600)/60)).padStart(2,'0');
  const s=String(sec%60).padStart(2,'0');
  return `${h}:${m}:${s}`;
}
let items=[];
function render(){
  tbody.innerHTML='';
  items.forEach((it,i)=>{
    const left=Math.max(0,Math.floor(it.expires_at-Date.now()/1000));
    const row=document.createElement('div');
    row.className='row';
    row.innerHTML=`
      <div class="keypill">${it.key}</div>
      <div class="time" id="left-${i}">${hhmmss(left)}</div>
      <div><span class="badge ${left>0?'ok':'ex'}">${left>0?'ACTIVE':'EXPIRED'}</span></div>
      <div class="act">
        <button class="copy">Copy</button>
        <button class="tiny">+5H</button>
      </div>`;
    row.querySelector('.copy').onclick=()=>navigator.clipboard.writeText(it.key);
    tbody.appendChild(row);
  });
}
setInterval(()=>{
  items.forEach((it,i)=>{
    const el=document.getElementById(`left-${i}`);
    if(!el) return;
    const left=Math.max(0,Math.floor(it.expires_at-Date.now()/1000));
    el.textContent=hhmmss(left);
  });
},1000);

document.getElementById('btnGet').onclick=async()=>{
  try{
    const res=await fetch(`/getkey?uid=123&place=999`);
    const data=await res.json();
    if(data.ok){
      items=[{key:data.key,expires_at:data.expires_at||Date.now()/1000+600}];
      render();
    }
  }catch(e){console.error(e)}
};
</script>
</body>
</html>
