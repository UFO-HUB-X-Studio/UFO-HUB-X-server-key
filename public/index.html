<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>UFO HUB X ‚Äî Get Key</title>
<style>
  :root{
    --bg:#0b0f12;
    --card:#0f1418CC;
    --muted:#9fb0b7;
    --text:#e9f1f3;
    --accent:#00ff8c;          /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß UFO */
    --accent-d:#00d977;
    --danger:#e5484d;
    --ok:#23d18b;
    --stroke:#1f2a30;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
    color:var(--text); background:#000;
    /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
    background-image:url("https://cdn.discordapp.com/attachments/1417098355388973154/1417560780110434446/file_00000000385861fab9ee0612cc0dca89.png?ex=68caedda&is=68c99c5a&hm=2638f6b576104b88e472c7f13517e8fa83d04ae63b785255a821d5c685daeaf9&");
    background-size:cover; background-position:center; background-attachment:fixed;
  }
  .overlay{position:fixed; inset:0; background:linear-gradient(180deg,#00000066,#00000099)}
  .wrap{
    position:relative; z-index:1;
    min-height:100%;
    display:grid; place-items:center;
    padding:24px;
  }
  .card{
    width:min(920px,100%);
    background:var(--card); backdrop-filter:blur(6px);
    border:1px solid var(--accent); border-radius:18px;
    box-shadow:0 10px 30px #0007;
    padding:20px;
  }
  .header{
    display:flex; align-items:center; gap:14px;
    padding:6px 10px 14px 10px; border-bottom:1px solid #ffffff1a;
  }
  .logo{
    width:64px; height:64px; border-radius:12px; border:1px solid #00ff8c55;
    object-fit:cover;
  }
  .title{
    font-weight:900; letter-spacing:.3px; line-height:1.15; font-size:28px;
  }
  .title .ufo{color:var(--accent)}
  .title .hub{color:#fff}
  .rows{display:grid; gap:16px; margin-top:14px}

  /* Progress area */
  .progressRow{
    display:grid; grid-template-columns:1fr auto; gap:14px; align-items:center;
    background:#0b1013aa; border:1px solid var(--stroke); border-radius:12px; padding:14px;
  }
  .barWrap{width:100%}
  .barMeta{display:flex; justify-content:space-between; font-size:14px; color:var(--muted); margin-bottom:6px}
  .bar{height:10px; background:#0d2024; border:1px solid #17333a; border-radius:999px; overflow:hidden}
  .bar>span{display:block; height:100%; width:0%; background:var(--accent); transition:width .25s ease}
  .timer{font-weight:600; color:#cde6ff}
  .btn{
    border:none; border-radius:12px; padding:12px 18px; font-weight:800; cursor:pointer;
    color:#000; background:var(--accent); transition:transform .06s ease, background .2s ease, opacity .2s;
    display:inline-flex; gap:10px; align-items:center; justify-content:center;
  }
  .btn:active{transform:translateY(1px)}
  .btn.dim{opacity:.6; pointer-events:none}
  .btn.secondary{background:#0e1518; color:#e9f1f3; border:1px solid var(--accent)}
  .btn.danger{background:var(--danger); color:#fff}

  /* Keys table */
  .section{background:#0b1013aa; border:1px solid var(--stroke); border-radius:12px; padding:12px}
  .secHead{
    display:flex; justify-content:space-between; align-items:center; padding:6px 6px 10px 6px;
    border-bottom:1px solid #ffffff12; margin-bottom:8px;
  }
  .secTitle{font-weight:800; color:#d9e6ea}
  .table{width:100%; border-collapse:collapse}
  .table th,.table td{
    padding:12px 10px; border-bottom:1px solid #ffffff10; text-align:center;
  }
  .table th{text-transform:uppercase; letter-spacing:.4px; font-size:12px; color:#9db2b9}
  .badge{
    font-weight:800; padding:6px 10px; border-radius:999px; display:inline-block; font-size:12px;
  }
  .ok{background:#0c3226; color:#49f3b4; border:1px solid #2ad39a}
  .bad{background:#34151a; color:#ff8c96; border:1px solid #e45865}
  .actions{display:flex; justify-content:center; gap:10px}          /* ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ */
  .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;}

  /* Mobile */
  @media (max-width:640px){
    .title{font-size:22px}
    .logo{width:52px;height:52px}
    .progressRow{grid-template-columns:1fr}
    .secHead{flex-direction:column; gap:10px; align-items:flex-start}
    .table th:nth-child(2), .table td:nth-child(2){display:none} /* ‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ñ‡∏µ‡∏¢‡πå‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
  }
</style>
</head>
<body>
<div class="overlay"></div>
<div class="wrap">
  <div class="card">
    <div class="header">
      <img class="logo" src="https://cdn.discordapp.com/attachments/1417098355388973154/1417560447279960194/20250916_152130.png?ex=68caed8b&is=68c99c0b&hm=d765fd0dd2ea7abcf19570afee5aee70c89dc0c5c83a337454d4f5a1aa7d0f32&" alt="UFO HUB X">
      <div class="title">
        <span class="ufo">UFO</span> <span class="hub">HUB X</span>
      </div>
    </div>

    <div class="rows">

      <!-- PROGRESS -->
      <div class="progressRow">
        <div class="barWrap">
          <div class="barMeta">
            <div>Progress: <b id="progressText">0/2</b></div>
            <div class="timer" id="timer"></div>
          </div>
          <div class="bar"><span id="barFill"></span></div>
        </div>
        <button id="startBtn" class="btn"><span>üü¢</span> START</button>
      </div>

      <!-- KEYS -->
      <div class="section">
        <div class="secHead">
          <div class="secTitle">Your Keys (max 1)</div>
          <button id="newKey" class="btn secondary dim">Ôºã GET A NEW KEY</button>
        </div>
        <div class="tableWrap">
          <table class="table" id="keysTable">
            <thead>
              <tr>
                <th>Key</th>
                <th>Full Key</th>
                <th>Time Left</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="keysBody">
              <tr><td colspan="5" style="padding:16px;color:#a6bac1;">No keys yet.</td></tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
/* ---------------- State ---------------- */
const state = {
  step: 0,                     // 0 ‚Üí 1 ‚Üí 2 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å New Key
  cooldownUntil: 0,            // ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (2 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå)
  keys: JSON.parse(localStorage.getItem('ufohubx-keys')||'[]') // [{value, expires}]
};
const COOLDOWN_MS = 2*60*1000;         // 2 ‡∏ô‡∏≤‡∏ó‡∏µ
const KEY_LIFETIME = 48*60*60*1000;    // 48 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
const EXTEND_MS = 5*60*60*1000;        // +5 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á

/* ---------------- Helpers ---------------- */
const $ = s=>document.querySelector(s);
const $$ = s=>document.querySelectorAll(s);

function saveKeys(){ localStorage.setItem('ufohubx-keys', JSON.stringify(state.keys)); }
function mask(k){ return k.length>6 ? k.slice(0,3)+"‚Ä¶"+k.slice(-3) : k; }
function randKey(){
  const base = "UFO-HUB-X-";
  const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  let r = "";
  for(let i=0;i<10;i++) r += chars[Math.floor(Math.random()*chars.length)];
  return base + r;
}
function fmtTimeLeft(ms){
  if(ms<=0) return "Expired";
  const s = Math.floor(ms/1000);
  const d = Math.floor(s/86400);
  const h = Math.floor(s%86400/3600);
  const m = Math.floor(s%3600/60);
  const ss= s%60;
  if(d>0) return `${d}d ${h}h ${m}m`;
  if(h>0) return `${h}h ${m}m`;
  return `${m}m ${ss}s`;
}
function canClaimNow(){
  const now = Date.now();
  if(now < state.cooldownUntil) return false;
  return state.step>=2;
}
function updateNewKeyButton(){
  const b = $('#newKey');
  if(state.keys.length>=1){
    b.classList.add('dim'); b.textContent="Only 1 key per user";
    return;
  }
  if(!canClaimNow()){
    const now=Date.now();
    if(now < state.cooldownUntil){
      const t = fmtTimeLeft(state.cooldownUntil - now);
      b.classList.add('dim');
      b.textContent = `Wait ${t}`;
    }else{
      b.classList.add('dim');
      b.textContent = "Finish START ‚Üí NEXT first";
    }
  }else{
    b.classList.remove('dim');
    b.textContent = "Ôºã GET A NEW KEY";
  }
}
function setProgress(step){
  state.step = Math.max(0, Math.min(2, step));
  $('#progressText').textContent = `${state.step}/2`;
  $('#barFill').style.width = (state.step/2*100) + '%';
  updateNewKeyButton();
}

/* ---------------- Timer + Buttons ---------------- */
let stepTimer = null;
function startStep(durationMs, onDone){
  clearInterval(stepTimer);
  const end = Date.now()+durationMs;
  stepTimer = setInterval(()=>{
    const left = end - Date.now();
    if(left<=0){
      clearInterval(stepTimer);
      $('#timer').textContent = '';
      onDone?.();
      return;
    }
    $('#timer').textContent = new Date(left).toISOString().substr(11,8);
  }, 200);
}

$('#startBtn').addEventListener('click', ()=>{
  // ‡πÄ‡∏õ‡∏¥‡∏î 2 ‡∏™‡πÄ‡∏ï‡πá‡∏õ: START ‚Üí NEXT
  if(state.step===0){
    $('#startBtn').innerHTML = '<span>‚è±Ô∏è</span> NEXT';
    startStep(60*1000, ()=>{          // 60s (‡∏™‡πÑ‡∏ï‡∏•‡πå Luar), ‡∏à‡∏∞‡∏•‡∏î/‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡πá‡πÑ‡∏î‡πâ
      setProgress(1);
    });
  }else if(state.step===1){
    $('#startBtn').innerHTML = '<span>‚úÖ</span> DONE';
    startStep(60*1000, ()=>{
      setProgress(2);
      $('#startBtn').innerHTML = '<span>üü¢</span> START';
    });
  }else{
    // step==2 ‡πÅ‡∏•‡πâ‡∏ß ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏Å‡∏î GET A NEW KEY
  }
});

/* ---------------- Render Keys ---------------- */
function paintKeys(){
  const body = $('#keysBody');
  body.innerHTML = '';
  if(state.keys.length===0){
    const tr=document.createElement('tr');
    tr.innerHTML = `<td colspan="5" style="padding:16px;color:#a6bac1;">No keys yet.</td>`;
    body.appendChild(tr);
    return;
  }
  state.keys.forEach((k, idx)=>{
    const now = Date.now();
    const ms = k.expires - now;
    const expired = ms<=0;

    const tr = document.createElement('tr');

    const tdKey = document.createElement('td');
    tdKey.className='mono';
    tdKey.textContent = mask(k.value);

    const tdFull = document.createElement('td');
    tdFull.className='mono';
    tdFull.textContent = k.value;

    const tdLeft = document.createElement('td');
    tdLeft.textContent = fmtTimeLeft(ms);

    const tdStatus = document.createElement('td');
    const badge = document.createElement('span');
    badge.className='badge ' + (expired?'bad':'ok');
    badge.textContent = expired ? 'EXPIRED' : 'ACTIVE';
    tdStatus.appendChild(badge);

    const tdAct = document.createElement('td');
    tdAct.className='actions';
    // Copy
    const bCopy = document.createElement('button');
    bCopy.className='btn secondary';
    bCopy.style.padding='8px 12px';
    bCopy.textContent='Copy';
    bCopy.addEventListener('click', async()=>{
      try{
        await navigator.clipboard.writeText(k.value);
        bCopy.textContent='‚úì Copied';
        setTimeout(()=>bCopy.textContent='Copy', 900);
      }catch(e){
        bCopy.textContent='Copied';
        setTimeout(()=>bCopy.textContent='Copy', 900);
      }
    });
    // +5H
    const bPlus = document.createElement('button');
    bPlus.className='btn secondary';
    bPlus.style.padding='8px 12px';
    bPlus.textContent='+5H';
    bPlus.addEventListener('click', ()=>{
      if(expired){
        // ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ + 5H (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡πá‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ)
        k.expires = Date.now() + EXTEND_MS;
      }else{
        k.expires += EXTEND_MS;
      }
      saveKeys(); paintKeys();
    });

    tdAct.appendChild(bCopy);
    tdAct.appendChild(bPlus);

    tr.appendChild(tdKey);
    tr.appendChild(tdFull);
    tr.appendChild(tdLeft);
    tr.appendChild(tdStatus);
    tr.appendChild(tdAct);
    body.appendChild(tr);
  });
}

/* ---------------- New Key (1 ‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 1 ‡∏Ñ‡∏µ‡∏¢‡πå) ---------------- */
$('#newKey').addEventListener('click', ()=>{
  if(!canClaimNow()){
    alert('‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏î START ‚Üí NEXT ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏ñ‡πâ‡∏≤‡∏°‡∏µ');
    return;
  }
  if(state.keys.length >= 1){
    alert('‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ Key ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Äî 1 ‡∏Ñ‡∏ô‡∏°‡∏µ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 1 Key ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô');
    return;
  }
  const v = randKey();
  const expires = Date.now() + KEY_LIFETIME;
  state.keys.unshift({value:v, expires});
  saveKeys(); paintKeys();

  // ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå 2 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏µ‡∏¢‡πå
  state.cooldownUntil = Date.now() + COOLDOWN_MS;
  state.step = 0; setProgress(0);
  $('#timer').textContent = '';
  updateNewKeyButton();
});

/* ---------------- Tickers ---------------- */
setInterval(()=>{
  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠
  paintKeys();
  updateNewKeyButton();
}, 1000);

/* ---------------- Init ---------------- */
setProgress(state.step||0);
paintKeys();
updateNewKeyButton();
</script>
</body>
</html>
